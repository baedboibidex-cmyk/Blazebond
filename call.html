<!DOCTYPE html>
<html>
<head>
  <title>Bondly Video Call ðŸ“¹</title>
  <link rel="stylesheet" href="style.css">
  <style>
    #video-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 10px;
      margin: 20px;
    }
    video {
      width: 100%;
      height: auto;
      background: #333;
      border-radius: 10px;
    }
    .controls {
      margin: 20px;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Video Call</h1>
  <div id="video-grid">
    <video id="localVideo" autoplay muted playsinline></video>
    <video id="remoteVideo" autoplay playsinline></video>
  </div>

  <div id="call-status" style="margin: 10px; font-weight: bold;">Connecting...</div>
  <div class="controls">
    <button id="hangupBtn" style="background: #ff4b6e; color: white;">Hang Up</button>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="firebase.js"></script>
<script src="navbar.js"></script>
<script>
  // Simple Mock/Placeholder for Video Call Logic
  const urlParams = new URLSearchParams(window.location.search);
  const callId = urlParams.get('callId');

  if (!callId) {
    alert("No call ID found!");
    window.location.href = "matches.html";
  }

  document.getElementById('hangupBtn').addEventListener('click', () => {
    // In a real app, we'd update the call document to "ended"
    db.collection('calls').doc(callId).update({ status: 'ended' })
      .then(() => window.location.href = "chat.html");
  });

  // Mocking remote stream
  auth.onAuthStateChanged(user => {
    if (!user) window.location.href = "index.html";
    console.log("Joined call:", callId);

    // Simulate connection
    setTimeout(() => {
      document.getElementById('call-status').innerText = "In Call";
    }, 2000);
  });
</script>

</body>
</html>
